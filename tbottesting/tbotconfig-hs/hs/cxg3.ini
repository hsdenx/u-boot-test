# you can replace strings in this file on boot
# in set_board_cfg() in boardspecific.py
#
# see example `set-board-cfg-temp-str-none-filename-str-none`_
[default]
user = @@USERNAME@@
date = @@TBOTDATE@@
board = @@TBOTBOARD@@
postbuild = local
serverip = @@TBOTSERVERIP@@
ipaddr = @@TBOTIPADDR@@
machine = @@TBOTMACHINE@@
denxlayer = meta-denx-kas
denxlayerbranch = master
vendor = denx
tftp_subdir = @@TFTPSUBDIR@@
deploydir = tmp/deploy/images/${machine}
nfs_path = @@TBOTLABBASENFSPATH@@/${machine}/${postbuild}
subdir = ${vendor}/${machine}
rootfsname = @@ROOTFSNAME@@
sdk_bin = name_of_sdk_shell_script

[TC]
    uboot_death_strings = ['Kernel panic']
    tmpdir = /tmp
    ignore_hostkey = True

    ############################################
    # U-Boot
    ############################################
    uboot_boot_timeout = None
    uboot_autoboot_timeout = 0.2
    #uboot_autoboot_prompt = Autobooting in \d{0,3} seconds, press "<Esc><Esc>" to stop
    uboot_autoboot_prompt = Autobooting in \d{0,3}.{0,80}
    uboot_autoboot_keys = bytearray:1b1b
    uboot_prompt = "U-Boot# "
    ub_env = [{"name":"serverip", "val":"${default:serverip}"}, \
      {"name":"ipaddr", "val":"${default:ipaddr}"}, \
      {"name":"netmask", "val":"255.255.255.0"}, \
      {"name":"date", "val":"${default:date}"}, \
      {"name":"end", "val":"end"}]

    ############################################
    # Linux
    ############################################
    linux_user = root
    linux_password = root

    linux_boot_timeout = 200
    linux_login_delay = 3
    linux_init_timeout = "2"

    linux_init = [ \
        {"cmd":"cat /proc/cmdline"}, \
        {"cmd":"uname -a"}, \
        ]

    dmesg = [
       ]

    dmesg_false = [
       "crash",
       ]

    ############################################
    # swupdate
    ############################################
    swuethdevice = eth0
    swuimage = swu-image.swu

    ############################################
    # kas
    ############################################
    kas = {
       "kasurl" : "https://github.com/siemens/kas.git",
       "kasversion" : "4.0",
       "build_machine" : "${default:machine}",
       "subdir" : "${default:subdir}",
       "kascontainer" : False,
       "git_credential_store" : "/home/${default:user}/.git-credentials",
       "ssh_dir" : "/home/${default:user}/.ssh",
       "kaslayer" : "git@gitlab.denx.de:denx/${default:denxlayer}",
       "kaslayername" : "${default:denxlayer}",
       "kaslayerbranch" : "master",
       "kasconfigfile" : "${default:denxlayer}/kas-denx.yml",
       "bitbakeenvinit" : "source/poky/oe-init-build-env",
       "envinit" : ["export PATH=/home/hs/data/bins/make-4.3/bin:$${PATH}"],
       "buildtargets" : [
           "core-image-minimal",
           "meta-toolchain-qt5",
           "bitbake -c populate_sdk core-image-dev",
           ],
       "bitbakeoptions" : ["-q", "-q"],
       }

    kas_check_files = [
       "${default:deploydir}/SPL",
       "${default:deploydir}/u-boot.img",
       "${default:deploydir}/fitImage",
       "tmp/deploy/sdk/${default:sdk_bin}",
       ]
    kas_results = [
       "SPL",
       "u-boot.img",
       "fitImage",
       ]
